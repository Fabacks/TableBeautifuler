{"version":3,"sources":["TableBeautifuller.js"],"names":["TableBeautifuller","constructor","tableId","options","this","table","document","querySelector","columnSearch","undefined","orderString","order","getAttribute","initialOrder","JSON","parse","Array","isArray","pageLength","parseInt","currentPage","selectItemPage","includes","push","sort","a","b","debounce_delai","debounceDelai","classList","add","createWrappers","addSearchInput","addSortingArrows","addSearchColumn","addPaginationControls","applyInitialOrder","paginate","paginationWrapperTopContainer","createElement","parentNode","insertBefore","paginationWrapperDownContainer","appendChild","debounce","func","delay","debounceTimer","context","args","arguments","clearTimeout","setTimeout","apply","searchInput","setAttribute","className","addEventListener","searchTable","value","searchRow","querySelectorAll","forEach","header","cell","input","type","e","cellIndex","target","select","uniqueValues","getUniqueValuesForColumn","innerHTML","val","option","textContent","colIndex","values","row","cells","trim","idx","dataset","arrow","boundHandler","headerClickHandler","bind","_sortingHandler","sortDirection","sortTable","updateArrows","currentHeader","detectColumnType","rows","i","length","content","hasAttribute","isNaN","direction","from","A","B","localeCompare","append","orderCriteria","toLowerCase","query","matched","style","display","rowText","getElementsByTagName","map","join","indexOf","totalRows","filter","totalPages","Math","ceil","prevButton","disabled","nextButton","startIdx","endIdx","endDisplay","infoLabel","startPage","max","endPage","min","btn","pageNumber","toggle","paginationWrapperTop","paginationInfoTop","paginationSelect","num","selected","paginationInfoTopAfter","paginationButtonsContainer","pageButton","destroy","remove","removeEventListener"],"mappings":";;;;;;;;;;;;;;;AAAA,MAAMA,kBACF,WAAAC,CAAYC,EAASC,EAAU,CAAC,GAC5BC,KAAKC,MAAQC,SAASC,cAAcL,GAGpCE,KAAKI,kBAAwCC,IAAzBN,EAAQK,cAA6BL,EAAQK,aAGjE,IAAIE,EAAcP,EAAQQ,OAASP,KAAKC,MAAMO,aAAa,cAChC,iBAAhBF,EACPN,KAAKS,aAAeC,KAAKC,MAAML,GACxBM,MAAMC,QAAQP,GACrBN,KAAKS,aAAeH,EAEpBN,KAAKS,aAAe,GAIxBT,KAAKc,WAAaf,EAAQe,YAAcC,SAASf,KAAKC,MAAMO,aAAa,sBAAwB,GACjGR,KAAKgB,YAAc,EAGnBhB,KAAKiB,eAAiBlB,EAAQkB,gBAAkB,CAAC,GAAI,GAAI,IACpDjB,KAAKiB,eAAeC,SAASlB,KAAKc,cACnCd,KAAKiB,eAAeE,KAAKnB,KAAKc,YAC9Bd,KAAKiB,eAAeG,MAAK,CAACC,EAAGC,IAAMD,EAAIC,KAI3CtB,KAAKuB,eAAiBxB,EAAQyB,eAAiB,IAG/CxB,KAAKC,MAAMwB,UAAUC,IAAI,qBAEzB1B,KAAK2B,iBACL3B,KAAK4B,iBACL5B,KAAK6B,mBACD7B,KAAKI,cACLJ,KAAK8B,kBAET9B,KAAK+B,wBACL/B,KAAKgC,oBACLhC,KAAKiC,UACT,CAEA,cAAAN,GAEI3B,KAAKkC,8BAAgChC,SAASiC,cAAc,OAC5DnC,KAAKkC,8BAA8BT,UAAUC,IAAI,oBAAqB,oCACtE1B,KAAKC,MAAMmC,WAAWC,aAAarC,KAAKkC,8BAA+BlC,KAAKC,OAG5ED,KAAKsC,+BAAiCpC,SAASiC,cAAc,OAC7DnC,KAAKsC,+BAA+Bb,UAAUC,IAAI,oBAAqB,6BACvE1B,KAAKC,MAAMmC,WAAWG,YAAYvC,KAAKsC,+BAC3C,CAEA,QAAAE,CAASC,EAAMC,GACX,IAAIC,EACJ,OAAO,WACH,MAAMC,EAAU5C,KACV6C,EAAOC,UACbC,aAAaJ,GACbA,EAAgBK,YAAW,IAAMP,EAAKQ,MAAML,EAASC,IAAOH,EAChE,CACJ,CAEA,cAAAd,GACI5B,KAAKkD,YAAchD,SAASiC,cAAc,SAC1CnC,KAAKkD,YAAYC,aAAa,OAAQ,QACtCnD,KAAKkD,YAAYC,aAAa,cAAe,gBAC7CnD,KAAKkD,YAAYE,UAAY,eAC7BpD,KAAKkC,8BAA8BK,YAAYvC,KAAKkD,aAEpDlD,KAAKkD,YAAYG,iBAAiB,QAASrD,KAAKwC,UAAS,KACrDxC,KAAKsD,YAAY,KAAMtD,KAAKkD,YAAYK,MAAM,GAC/CvD,KAAKuB,gBACZ,CAEA,eAAAO,GACI,IAAI0B,EAAYtD,SAASiC,cAAc,MACvCqB,EAAU/B,UAAUC,IAAI,gBAEV1B,KAAKC,MAAMwD,iBAAiB,MAClCC,SAAQC,IACZ,IAAIC,EAAO1D,SAASiC,cAAc,MAGlC,OAFiBwB,EAAOnD,aAAa,gBAAkB,IAGnD,IAAK,QACD,IAAIqD,EAAQ3D,SAASiC,cAAc,SACnC0B,EAAMC,KAAO,OACbD,EAAMR,iBAAiB,QAASrD,KAAKwC,UAAUuB,IAC3C/D,KAAKsD,YAAYK,EAAOK,UAAWD,EAAEE,OAAOV,MAAM,GACnDvD,KAAKuB,iBACRqC,EAAKrB,YAAYsB,GACrB,MACA,IAAK,WACD,IAAIK,EAAShE,SAASiC,cAAc,UAChCgC,EAAenE,KAAKoE,yBAAyBT,EAAOK,WACxDE,EAAOG,UAAY,iCACnBF,EAAaT,SAAQY,IACjB,IAAIC,EAASrE,SAASiC,cAAc,UACpCoC,EAAOhB,MAAQe,EACfC,EAAOC,YAAcF,EACrBJ,EAAO3B,YAAYgC,EAAO,IAG9BL,EAAOb,iBAAiB,SAAUrD,KAAKwC,UAAUuB,IAC7C/D,KAAKsD,YAAYK,EAAOK,UAAWD,EAAEE,OAAOV,MAAM,GACnDvD,KAAKuB,iBACRqC,EAAKrB,YAAY2B,GACrB,MACA,QACI,OAGRV,EAAUjB,YAAYqB,EAAK,IAG/B5D,KAAKC,MAAME,cAAc,SAASoC,YAAYiB,EAClD,CAEA,wBAAAY,CAAyBK,GACrB,IAAIC,EAAS,GAQb,OAPW1E,KAAKC,MAAME,cAAc,SAASsD,iBAAiB,MACzDC,SAAQiB,IACT,IAAIpB,EAAQoB,EAAIC,MAAMH,GAAUD,YAAYK,OACvCH,EAAOxD,SAASqC,IACjBmB,EAAOvD,KAAKoC,EAChB,IAEGmB,CACX,CAEA,gBAAA7C,GACkB7B,KAAKC,MAAMwD,iBAAiB,MAClCC,SAAQ,CAACC,EAAQmB,KACrBnB,EAAOoB,QAAQ3D,KAAO,OAEtB,IAAI4D,EAAQ9E,SAASiC,cAAc,QACnC6C,EAAMvD,UAAUC,IAAI,cACpBiC,EAAOpB,YAAYyC,GAEnB,IAAIC,EAAejF,KAAKkF,mBAAmBC,KAAKnF,KAAM2D,EAAQmB,GAC9DnB,EAAOyB,gBAAkBH,EAEzBtB,EAAON,iBAAiB,QAAS4B,EAAa,GAEtD,CAEA,kBAAAC,CAAmBvB,EAAQmB,GACvB,IAAIO,EAAwC,QAAxB1B,EAAOoB,QAAQ3D,KAAiB,OAAS,MAC7DpB,KAAKsF,UAAUR,EAAKO,GACpB1B,EAAOoB,QAAQ3D,KAAOiE,EACtBrF,KAAKuF,aAAa5B,EACtB,CAEA,YAAA4B,CAAaC,GAETxF,KAAKC,MAAMwD,iBAAiB,eAAeC,SAAQsB,IAC/CA,EAAMR,YAAc,EAAE,IAGVgB,EAAcrF,cAAc,eAClCqE,YAA6C,QAA/BgB,EAAcT,QAAQ3D,KAAiB,IAAM,GACzE,CAEA,gBAAAqE,CAAiBhB,GACb,IAAIiB,EAAO1F,KAAKC,MAAME,cAAc,SAASsD,iBAAiB,MAC9D,IAAK,IAAIkC,EAAI,EAAGA,EAAID,EAAKE,OAAQD,IAC7B,GAAID,EAAKC,GAAGf,MAAMH,GAAW,CACzB,IAAIoB,EAAUH,EAAKC,GAAGf,MAAMH,GAAUqB,aAAa,cAAgBJ,EAAKC,GAAGf,MAAMH,GAAUjE,aAAa,cAAgBkF,EAAKC,GAAGf,MAAMH,GAAUD,YAAYK,OAC5J,IAAKkB,MAAMF,GACP,MAAO,QAEf,CAEJ,MAAO,QACX,CAEA,SAAAP,CAAUb,EAAUuB,GAChB,IAAIlC,EAAO9D,KAAKyF,iBAAiBhB,GAC7BiB,EAAO9E,MAAMqF,KAAKjG,KAAKC,MAAME,cAAc,SAASsD,iBAAiB,OACzEiC,EAAKtE,MAAK,CAACC,EAAGC,KACV,IAAI4E,EAAI7E,EAAEuD,MAAMH,GAAUqB,aAAa,cAAgBzE,EAAEuD,MAAMH,GAAUjE,aAAa,cAAgBa,EAAEuD,MAAMH,GAAUD,YAAYK,OAChIsB,EAAI7E,EAAEsD,MAAMH,GAAUqB,aAAa,cAAgBxE,EAAEsD,MAAMH,GAAUjE,aAAa,cAAgBc,EAAEsD,MAAMH,GAAUD,YAAYK,OAEpI,MAAa,WAATf,EACqB,QAAdkC,EAAsBE,EAAIC,EAAIA,EAAID,EAEpB,QAAdF,EAAsBE,EAAEE,cAAcD,GAAKA,EAAEC,cAAcF,EACtE,IAGJlG,KAAKC,MAAME,cAAc,SAASkG,UAAUX,EAChD,CAEA,iBAAA1D,GACIhC,KAAKS,aAAaiD,SAAQ4C,IACtB,IAAK7B,EAAUuB,GAAaM,EAC5BtG,KAAKsF,UAAUb,EAAUuB,EAAUO,eAEnC,IAAI5C,EAAS3D,KAAKC,MAAME,cAAc,gBAAgBsE,EAAW,MACjEd,EAAOoB,QAAQ3D,KAAO4E,EAAUO,cAChCvG,KAAKuF,aAAa5B,EAAO,GAEjC,CAEA,WAAAL,CAAYmB,EAAU+B,GAClB,IAAId,EAAO1F,KAAKC,MAAMwD,iBAAiB,YAGvCiC,EAAKhC,SAAQiB,IACTA,EAAII,QAAQ0B,QAAU,OACtB9B,EAAI+B,MAAMC,QAAU,EAAE,IAI1BjB,EAAKhC,SAAQiB,IACT,IAAIiC,EAAU,GACd,GAAgB,MAAZnC,EAAmB,CACnB,IAAIb,EAAOe,EAAIC,MAAMH,GACrBmC,EAAUhD,EAAKkC,aAAa,eAAiBlC,EAAKpD,aAAa,eAAiBoD,EAAKY,WACzF,KAAQ,CAEJoC,EADYhG,MAAMqF,KAAKtB,EAAIkC,qBAAqB,OAChCC,KAAIlD,GACTA,EAAKkC,aAAa,eAAiBlC,EAAKpD,aAAa,eAAiBoD,EAAKY,cACnFuC,KAAK,IACZ,CAEAH,EAAUA,EAAQ/B,OAAO0B,eACqB,IAA1CK,EAAQI,QAAQR,EAAMD,gBACtB5B,EAAI+B,MAAMC,QAAU,GACpBhC,EAAII,QAAQ0B,QAAU,SAEtB9B,EAAI+B,MAAMC,QAAU,OACpBhC,EAAII,QAAQ0B,QAAU,QAC1B,IAIJzG,KAAKgB,YAAc,EACnBhB,KAAKiC,UACT,CAEA,QAAAA,GACI,IAAIgF,EAAYrG,MAAMqF,KAAKjG,KAAKC,MAAMwD,iBAAiB,aAAayD,QAAOvC,GAA+B,UAAxBA,EAAII,QAAQ0B,UAAqBb,OAC/GuB,EAAaC,KAAKC,KAAKJ,EAAYjH,KAAKc,YAG5Cd,KAAKsH,WAAWC,SAAWvH,KAAKgB,aAAe,EAC/ChB,KAAKwH,WAAWD,SAAWvH,KAAKgB,aAAemG,EAE/C,IAAIM,GAAYzH,KAAKgB,YAAc,GAAKhB,KAAKc,WACzC4G,EAASD,EAAWzH,KAAKc,WAElBF,MAAMqF,KAAKjG,KAAKC,MAAMwD,iBAAiB,aAAayD,QAAOvC,GAA+B,UAAxBA,EAAII,QAAQ0B,UACpF/C,SAAQ,CAACiB,EAAKG,KACfH,EAAI+B,MAAMC,QAAU7B,EAAM2C,GAAY3C,GAAO4C,EAAS,OAAS,EAAE,IAGrE,IAAIC,EAAaD,EAAST,EAAYA,EAAYS,EAClD1H,KAAK4H,UAAUpD,YAAc,0BAA0BiD,EAAW,OAAOE,SAAkBV,aAE3F,IAAIY,EAAYT,KAAKU,IAAI,EAAG9H,KAAKgB,YAAc,GAC3C+G,EAAUX,KAAKY,IAAIb,EAAYnH,KAAKgB,YAAc,GAEpChB,KAAKsC,+BAA+BmB,iBAAiB,aAC3DC,SAAQ,CAACuE,EAAKnD,KACtB,IAAIoD,EAAaL,EAAY/C,EAC7BmD,EAAIzD,YAAc0D,EAClBD,EAAIvB,MAAMC,QAAUuB,GAAcH,EAAU,GAAK,OACjDE,EAAIxG,UAAU0G,OAAO,SAAUD,IAAelI,KAAKgB,YAAY,GAEvE,CAEA,qBAAAe,GAEI/B,KAAKoI,qBAAuBlI,SAASiC,cAAc,OACnDnC,KAAKoI,qBAAqBhF,UAAY,yBAEtCpD,KAAKqI,kBAAoBnI,SAASiC,cAAc,QAChDnC,KAAKqI,kBAAkB7D,YAAc,WACrCxE,KAAKoI,qBAAqB7F,YAAYvC,KAAKqI,mBAE3CrI,KAAKsI,iBAAmBpI,SAASiC,cAAc,UAC/CnC,KAAKiB,eAAeyC,SAAQ6E,IACxB,IAAIhE,EAASrE,SAASiC,cAAc,UACpCoC,EAAOhB,MAAQgF,EACfhE,EAAOC,YAAc+D,EACrBhE,EAAOiE,SAAWD,IAAQvI,KAAKc,WAC/Bd,KAAKsI,iBAAiB/F,YAAYgC,EAAO,IAE7CvE,KAAKsI,iBAAiB/E,MAAQvD,KAAKc,WACnCd,KAAKoI,qBAAqB7F,YAAYvC,KAAKsI,kBAE3CtI,KAAKyI,uBAAyBvI,SAASiC,cAAc,QACrDnC,KAAKyI,uBAAuBjE,YAAc,WAC1CxE,KAAKoI,qBAAqB7F,YAAYvC,KAAKyI,wBAE3CzI,KAAKkC,8BAA8BK,YAAYvC,KAAKoI,sBAGpDpI,KAAK4H,UAAY1H,SAASiC,cAAc,QACxCnC,KAAK4H,UAAUxE,UAAY,kBAC3BpD,KAAKsC,+BAA+BC,YAAYvC,KAAK4H,WAGrD5H,KAAK0I,2BAA6BxI,SAASiC,cAAc,OACzDnC,KAAK0I,2BAA2BtF,UAAY,+BAE5CpD,KAAKsH,WAAapH,SAASiC,cAAc,UACzCnC,KAAKsH,WAAW9C,YAAc,YAC9BxE,KAAK0I,2BAA2BnG,YAAYvC,KAAKsH,YAEjD,IAAK,IAAI3B,EAAI,EAAGA,GAAK,EAAGA,IAAK,CACzB,IAAIgD,EAAazI,SAASiC,cAAc,UACxCwG,EAAWnE,YAAcmB,EACzBgD,EAAWvF,UAAY,WACvBuF,EAAWtF,iBAAiB,SAAS,KACjCrD,KAAKgB,YAAcD,SAAS4H,EAAWnE,aACvCxE,KAAKiC,UAAU,IAEnBjC,KAAK0I,2BAA2BnG,YAAYoG,EAChD,CAEA3I,KAAKwH,WAAatH,SAASiC,cAAc,UACzCnC,KAAKwH,WAAWhD,YAAc,UAC9BxE,KAAK0I,2BAA2BnG,YAAYvC,KAAKwH,YACjDxH,KAAKsC,+BAA+BC,YAAYvC,KAAK0I,4BAErD1I,KAAKsI,iBAAiBjF,iBAAiB,UAAU,KAC7CrD,KAAKc,WAAaC,SAASf,KAAKsI,iBAAiB/E,OACjDvD,KAAKgB,YAAc,EACnBhB,KAAKiC,UAAU,IAGnBjC,KAAKsH,WAAWjE,iBAAiB,SAAS,KACtCrD,KAAKgB,cACLhB,KAAKiC,UAAU,IAGnBjC,KAAKwH,WAAWnE,iBAAiB,SAAS,KACtCrD,KAAKgB,cACLhB,KAAKiC,UAAU,GAEvB,CAEA,OAAA2G,GAEQ5I,KAAKkD,aACLlD,KAAKkD,YAAY2F,SAIP7I,KAAKC,MAAMwD,iBAAiB,MAClCC,SAAQC,IACRA,EAAOyB,kBACPzB,EAAOmF,oBAAoB,QAASnF,EAAOyB,wBACpCzB,EAAOyB,iBAGlB,IAAIJ,EAAQrB,EAAOxD,cAAc,eAC7B6E,GACAA,EAAM6D,QACV,IAIO7I,KAAKC,MAAMwD,iBAAiB,YAClCC,SAAQiB,IACTA,EAAI+B,MAAMC,QAAU,EAAE,IAGtB3G,KAAKkC,+BACLlC,KAAKkC,8BAA8B2G,SAGnC7I,KAAKsC,gCACLtC,KAAKsC,+BAA+BuG,SAIxC,IAAIrF,EAAYxD,KAAKC,MAAME,cAAc,iBACrCqD,GACAA,EAAUqF,QAElB","file":"TableBeautifuller.min.js","sourcesContent":["class TableBeautifuller {\r\n    constructor(tableId, options = {}) {\r\n        this.table = document.querySelector(tableId);\r\n\r\n        // Initialisation de l'option columnSearch. Active par défaut\r\n        this.columnSearch = options.columnSearch !== undefined ? options.columnSearch : true; \r\n\r\n        // Initialisation du trie par défaut\r\n        let orderString = options.order || this.table.getAttribute(\"data-order\");\r\n        if (typeof orderString === \"string\") {\r\n            this.initialOrder = JSON.parse(orderString);\r\n        } else if (Array.isArray(orderString)) {\r\n            this.initialOrder = orderString;\r\n        } else {\r\n            this.initialOrder = [];\r\n        }\r\n\r\n        // Initialisation des valeurs pour la pagination (nombre item par page)\r\n        this.pageLength = options.pageLength || parseInt(this.table.getAttribute(\"data-page-length\")) || 10;\r\n        this.currentPage = 1;\r\n\r\n        // Initialisation du nombre d'item par page dans le selector\r\n        this.selectItemPage = options.selectItemPage || [10, 20, 30];\r\n        if (!this.selectItemPage.includes(this.pageLength)) {\r\n            this.selectItemPage.push(this.pageLength);\r\n            this.selectItemPage.sort((a, b) => a - b);\r\n        }\r\n\r\n        // Initialisation du debounce\r\n        this.debounce_delai = options.debounceDelai || 300;\r\n\r\n        // Ajout de la classe \"tableBeautifuller\" à la table\r\n        this.table.classList.add('tableBeautifuller');\r\n\r\n        this.createWrappers();\r\n        this.addSearchInput();\r\n        this.addSortingArrows();\r\n        if (this.columnSearch) {\r\n            this.addSearchColumn();\r\n        }\r\n        this.addPaginationControls();\r\n        this.applyInitialOrder();\r\n        this.paginate();\r\n    }\r\n\r\n    createWrappers() {\r\n        // Création du wrapper \"pagination-wrapper-top-container\" au dessus du tableau\r\n        this.paginationWrapperTopContainer = document.createElement('div');\r\n        this.paginationWrapperTopContainer.classList.add('tableBeautifuller', 'pagination-wrapper-top-container');\r\n        this.table.parentNode.insertBefore(this.paginationWrapperTopContainer, this.table);\r\n\r\n        // Création du wrapper \"pagination-down-container\" en dessous du tableau\r\n        this.paginationWrapperDownContainer = document.createElement('div');\r\n        this.paginationWrapperDownContainer.classList.add('tableBeautifuller', 'pagination-down-container');\r\n        this.table.parentNode.appendChild(this.paginationWrapperDownContainer);\r\n    }\r\n\r\n    debounce(func, delay) {\r\n        let debounceTimer;\r\n        return function() {\r\n            const context = this;\r\n            const args = arguments;\r\n            clearTimeout(debounceTimer);\r\n            debounceTimer = setTimeout(() => func.apply(context, args), delay);\r\n        };\r\n    }\r\n\r\n    addSearchInput() {\r\n        this.searchInput = document.createElement(\"input\");\r\n        this.searchInput.setAttribute(\"type\", \"text\");\r\n        this.searchInput.setAttribute(\"placeholder\", \"Recherche...\");\r\n        this.searchInput.className = \"search-input\";\r\n        this.paginationWrapperTopContainer.appendChild(this.searchInput);\r\n\r\n        this.searchInput.addEventListener(\"keyup\", this.debounce(() => {\r\n            this.searchTable(null, this.searchInput.value);\r\n        }, this.debounce_delai));\r\n    }\r\n\r\n    addSearchColumn() {\r\n        let searchRow = document.createElement('tr');\r\n        searchRow.classList.add(\"thead-search\");\r\n\r\n        let headers = this.table.querySelectorAll(\"th\");\r\n        headers.forEach(header => {\r\n            let cell = document.createElement('th');\r\n            let searchType = header.getAttribute('data-search') ?? '';\r\n\r\n            switch (searchType) {\r\n                case \"input\":\r\n                    let input = document.createElement('input');\r\n                    input.type = \"text\";\r\n                    input.addEventListener('input', this.debounce((e) => {\r\n                        this.searchTable(header.cellIndex, e.target.value);\r\n                    }, this.debounce_delai));\r\n                    cell.appendChild(input);\r\n                break;\r\n                case \"combobox\":\r\n                    let select = document.createElement('select');\r\n                    let uniqueValues = this.getUniqueValuesForColumn(header.cellIndex);\r\n                    select.innerHTML = `<option value=\"\">Tout</option>`;\r\n                    uniqueValues.forEach(val => {\r\n                        let option = document.createElement('option');\r\n                        option.value = val;\r\n                        option.textContent = val;\r\n                        select.appendChild(option);\r\n                    });\r\n\r\n                    select.addEventListener('change', this.debounce((e) => {\r\n                        this.searchTable(header.cellIndex, e.target.value);\r\n                    }, this.debounce_delai));\r\n                    cell.appendChild(select);\r\n                break;\r\n                default:\r\n                    return;\r\n            }\r\n\r\n            searchRow.appendChild(cell);\r\n        });\r\n\r\n        this.table.querySelector('thead').appendChild(searchRow);\r\n    }\r\n\r\n    getUniqueValuesForColumn(colIndex) {\r\n        let values = [];\r\n        let rows = this.table.querySelector(\"tbody\").querySelectorAll(\"tr\");\r\n        rows.forEach(row => {\r\n            let value = row.cells[colIndex].textContent.trim();\r\n            if (!values.includes(value)) {\r\n                values.push(value);\r\n            }\r\n        });\r\n        return values;\r\n    }\r\n\r\n    addSortingArrows() {\r\n        let headers = this.table.querySelectorAll(\"th\");\r\n        headers.forEach((header, idx) => {\r\n            header.dataset.sort = 'none';\r\n\r\n            let arrow = document.createElement('span');\r\n            arrow.classList.add('sort-arrow');\r\n            header.appendChild(arrow);\r\n\r\n            let boundHandler = this.headerClickHandler.bind(this, header, idx);\r\n            header._sortingHandler = boundHandler;\r\n\r\n            header.addEventListener(\"click\", boundHandler);\r\n        });\r\n    }\r\n\r\n    headerClickHandler(header, idx) {\r\n        let sortDirection = header.dataset.sort === 'asc' ? 'desc' : 'asc';\r\n        this.sortTable(idx, sortDirection);\r\n        header.dataset.sort = sortDirection;\r\n        this.updateArrows(header);\r\n    }\r\n\r\n    updateArrows(currentHeader) {\r\n        // Reset all arrows\r\n        this.table.querySelectorAll(\".sort-arrow\").forEach(arrow => {\r\n            arrow.textContent = '';\r\n        });\r\n\r\n        let arrowSpan = currentHeader.querySelector('.sort-arrow');\r\n        arrowSpan.textContent = currentHeader.dataset.sort === 'asc' ? '▲' : '▼';\r\n    }\r\n\r\n    detectColumnType(colIndex) {\r\n        let rows = this.table.querySelector(\"tbody\").querySelectorAll(\"tr\");\r\n        for (let i = 0; i < rows.length; i++) {\r\n            if (rows[i].cells[colIndex]) {\r\n                let content = rows[i].cells[colIndex].hasAttribute('data-order') ? rows[i].cells[colIndex].getAttribute('data-order') : rows[i].cells[colIndex].textContent.trim();\r\n                if (!isNaN(content)) {\r\n                    return 'number';\r\n                }\r\n            }\r\n        }\r\n        return 'string';\r\n    }\r\n\r\n    sortTable(colIndex, direction) {\r\n        let type = this.detectColumnType(colIndex);\r\n        let rows = Array.from(this.table.querySelector(\"tbody\").querySelectorAll(\"tr\"));\r\n        rows.sort((a, b) => {\r\n            let A = a.cells[colIndex].hasAttribute('data-order') ? a.cells[colIndex].getAttribute('data-order') : a.cells[colIndex].textContent.trim();\r\n            let B = b.cells[colIndex].hasAttribute('data-order') ? b.cells[colIndex].getAttribute('data-order') : b.cells[colIndex].textContent.trim();\r\n\r\n            if (type === 'number') {\r\n                return direction === 'asc' ? A - B : B - A;\r\n            } else {\r\n                return direction === 'asc' ? A.localeCompare(B) : B.localeCompare(A);\r\n            }\r\n        });\r\n\r\n        this.table.querySelector(\"tbody\").append(...rows);\r\n    }\r\n\r\n    applyInitialOrder() {\r\n        this.initialOrder.forEach(orderCriteria => {\r\n            let [colIndex, direction] = orderCriteria;\r\n            this.sortTable(colIndex, direction.toLowerCase());\r\n\r\n            let header = this.table.querySelector(`th:nth-child(${colIndex + 1})`);\r\n            header.dataset.sort = direction.toLowerCase();\r\n            this.updateArrows(header);\r\n        });\r\n    }\r\n\r\n    searchTable(colIndex, query) {\r\n        let rows = this.table.querySelectorAll(\"tbody tr\");\r\n\r\n        // Reset de la recherche\r\n        rows.forEach(row => {\r\n            row.dataset.matched = \"true\";\r\n            row.style.display = \"\";\r\n        });\r\n\r\n        // Recherche \r\n        rows.forEach(row => {\r\n            let rowText = \"\"\r\n            if( colIndex != null ) {\r\n                let cell = row.cells[colIndex];\r\n                rowText = cell.hasAttribute(\"data-search\") ? cell.getAttribute(\"data-search\") : cell.textContent;\r\n            } else  {\r\n                let cells = Array.from(row.getElementsByTagName(\"td\"));\r\n                rowText = cells.map(cell => {\r\n                    return cell.hasAttribute(\"data-search\") ? cell.getAttribute(\"data-search\") : cell.textContent;\r\n                }).join(' ');\r\n            }\r\n\r\n            rowText = rowText.trim().toLowerCase();\r\n            if (rowText.indexOf(query.toLowerCase()) !== -1) {\r\n                row.style.display = \"\";\r\n                row.dataset.matched = \"true\";\r\n            } else {\r\n                row.style.display = \"none\";\r\n                row.dataset.matched = \"false\";\r\n            }\r\n        });\r\n\r\n        // Remise à zéro de la pagination et repagination avec les résultats filtrés\r\n        this.currentPage = 1;\r\n        this.paginate();\r\n    }\r\n\r\n    paginate() {\r\n        let totalRows = Array.from(this.table.querySelectorAll(\"tbody tr\")).filter(row => row.dataset.matched !== \"false\").length;\r\n        let totalPages = Math.ceil(totalRows / this.pageLength);\r\n\r\n        // Control display of previous & next buttons\r\n        this.prevButton.disabled = this.currentPage <= 1;\r\n        this.nextButton.disabled = this.currentPage >= totalPages\r\n\r\n        let startIdx = (this.currentPage - 1) * this.pageLength;\r\n        let endIdx = startIdx + this.pageLength;\r\n\r\n        let rows = Array.from(this.table.querySelectorAll(\"tbody tr\")).filter(row => row.dataset.matched !== \"false\");\r\n        rows.forEach((row, idx) => {\r\n            row.style.display = idx < startIdx || idx >= endIdx ? \"none\" : \"\";\r\n        });\r\n\r\n        let endDisplay = endIdx > totalRows ? totalRows : endIdx;\r\n        this.infoLabel.textContent = `Affichage de l'élément ${startIdx + 1} à ${endDisplay} sur ${totalRows} éléments`;\r\n\r\n        let startPage = Math.max(1, this.currentPage - 2);\r\n        let endPage = Math.min(totalPages, this.currentPage + 2);\r\n\r\n        let pageButtons = this.paginationWrapperDownContainer.querySelectorAll('.page-btn');\r\n        pageButtons.forEach((btn, idx) => {\r\n            let pageNumber = startPage + idx;\r\n            btn.textContent = pageNumber;\r\n            btn.style.display = pageNumber <= endPage ? '' : 'none';\r\n            btn.classList.toggle('active', pageNumber === this.currentPage);\r\n        });\r\n    }\r\n\r\n    addPaginationControls() {\r\n        // Items per page select\r\n        this.paginationWrapperTop = document.createElement('div');\r\n        this.paginationWrapperTop.className = 'pagination-wrapper-top';\r\n\r\n        this.paginationInfoTop = document.createElement(\"span\");\r\n        this.paginationInfoTop.textContent = \"Afficher\";\r\n        this.paginationWrapperTop.appendChild(this.paginationInfoTop);\r\n\r\n        this.paginationSelect = document.createElement(\"select\");\r\n        this.selectItemPage.forEach(num => {\r\n            let option = document.createElement(\"option\");\r\n            option.value = num;\r\n            option.textContent = num;\r\n            option.selected = num === this.pageLength ? true : false;\r\n            this.paginationSelect.appendChild(option);\r\n        });\r\n        this.paginationSelect.value = this.pageLength;\r\n        this.paginationWrapperTop.appendChild(this.paginationSelect);\r\n\r\n        this.paginationInfoTopAfter = document.createElement(\"span\");\r\n        this.paginationInfoTopAfter.textContent = \"éléments\";\r\n        this.paginationWrapperTop.appendChild(this.paginationInfoTopAfter);\r\n\r\n        this.paginationWrapperTopContainer.appendChild(this.paginationWrapperTop);\r\n\r\n        // Information display\r\n        this.infoLabel = document.createElement('span');\r\n        this.infoLabel.className = 'pagination-info';\r\n        this.paginationWrapperDownContainer.appendChild(this.infoLabel);\r\n\r\n        // Create du wrapper \"pagination-buttons-container\" for boutton\r\n        this.paginationButtonsContainer = document.createElement('div');\r\n        this.paginationButtonsContainer.className = 'pagination-buttons-container';\r\n\r\n        this.prevButton = document.createElement('button');\r\n        this.prevButton.textContent = 'Précédent';\r\n        this.paginationButtonsContainer.appendChild(this.prevButton);\r\n\r\n        for (let i = 1; i <= 5; i++) {\r\n            let pageButton = document.createElement('button');\r\n            pageButton.textContent = i;\r\n            pageButton.className = 'page-btn';\r\n            pageButton.addEventListener('click', () => {\r\n                this.currentPage = parseInt(pageButton.textContent);\r\n                this.paginate();\r\n            });\r\n            this.paginationButtonsContainer.appendChild(pageButton);\r\n        }\r\n\r\n        this.nextButton = document.createElement('button');\r\n        this.nextButton.textContent = 'Suivant';\r\n        this.paginationButtonsContainer.appendChild(this.nextButton);\r\n        this.paginationWrapperDownContainer.appendChild(this.paginationButtonsContainer);\r\n\r\n        this.paginationSelect.addEventListener(\"change\", () => {\r\n            this.pageLength = parseInt(this.paginationSelect.value);\r\n            this.currentPage = 1;\r\n            this.paginate();\r\n        });\r\n\r\n        this.prevButton.addEventListener('click', () => {\r\n            this.currentPage--;\r\n            this.paginate();\r\n        });\r\n\r\n        this.nextButton.addEventListener('click', () => {\r\n            this.currentPage++;\r\n            this.paginate();\r\n        });\r\n    }\r\n\r\n    destroy() {\r\n        // Supprimer l'input de recherche\r\n        if (this.searchInput) {\r\n            this.searchInput.remove();\r\n        }\r\n\r\n        // Supprimer les flèches de tri et les gestionnaires d'événements\r\n        let headers = this.table.querySelectorAll(\"th\");\r\n        headers.forEach(header => {\r\n            if (header._sortingHandler) {\r\n                header.removeEventListener(\"click\", header._sortingHandler);\r\n                delete header._sortingHandler;\r\n            }\r\n\r\n            let arrow = header.querySelector(\".sort-arrow\");\r\n            if (arrow) {\r\n                arrow.remove();\r\n            }\r\n        });\r\n\r\n        // Afficher toutes les lignes du tableau\r\n        let rows = this.table.querySelectorAll(\"tbody tr\");\r\n        rows.forEach(row => {\r\n            row.style.display = \"\";\r\n        });\r\n\r\n        if (this.paginationWrapperTopContainer) {\r\n            this.paginationWrapperTopContainer.remove();\r\n        }\r\n\r\n        if (this.paginationWrapperDownContainer) {\r\n            this.paginationWrapperDownContainer.remove();\r\n        }\r\n\r\n        // Supprimer la ligne de recherche (filtres) dans l'en-tête\r\n        let searchRow = this.table.querySelector(\".thead-search\");\r\n        if (searchRow) {\r\n            searchRow.remove();\r\n        }\r\n    }\r\n}"]}